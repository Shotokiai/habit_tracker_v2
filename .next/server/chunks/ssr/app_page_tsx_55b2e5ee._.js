module.exports=[60350,a=>{"use strict";var b=a.i(99689),c=a.i(17196);function d({gridSize:a,spacing:c,dotSize:d,dayRecords:e}){return(0,b.jsx)("div",{className:"relative",style:{width:a*c,height:a*c},children:Array.from({length:a},(a,b)=>b+1).map(f=>Array.from({length:a},(a,b)=>b+1).map(g=>{let h=((a,b)=>{let c=e.find(c=>c.x===a&&c.y===b);if(!c)return"none";if(a>1){let b=e.find(b=>b.x===a-1);if(b&&c.y<b.y)return"missed"}else if(1===a&&0===c.y)return"missed";return c.y>=0?"success":"none"})(f,g);return(0,b.jsx)("div",{className:`absolute rounded-full transition-all ${"success"===h?"bg-primary scale-150 shadow-lg":"missed"===h?"bg-red-500 scale-150 shadow-lg":"bg-muted scale-100"}`,style:{width:d,height:d,left:f*c-c/2,top:(a-g+1)*c-c/2,transform:"translate(-50%, -50%)"}},`${f}-${g}`)}))})}function e({dayRecords:a}){(0,c.useMemo)(()=>{if(0===a.length)return 0;let b=0;return a.forEach((c,d)=>{let e=d>0?a[d-1]:null,f=e?e.y:0;c.y>f&&b++}),b},[a]);let e=(0,c.useMemo)(()=>{if(0===a.length)return"";let b=[];return a.forEach(a=>{let c=10*a.x-5+8,d=(30-a.y+1)*10-5+8;b.push(`${c},${d}`)}),"M "+b.join(" L ")},[a,30,10]);return(0,b.jsx)("div",{className:"flex flex-col items-center gap-2 px-4 py-2 w-full h-full",children:(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("div",{className:"absolute -left-6 top-0 flex flex-col justify-between text-xs font-semibold text-foreground",style:{height:316,paddingTop:8,paddingBottom:8},children:Array.from({length:30},(a,c)=>{let d=30-c;return(0,b.jsx)("div",{className:"flex items-center justify-end w-5",style:{height:10},children:(0,b.jsx)("span",{className:"text-right",style:{fontSize:"10px",lineHeight:"12px"},children:d%5==0?d:""})},d)})}),(0,b.jsxs)("div",{className:"relative bg-card border border-foreground/20 rounded-lg p-1 shadow-md",style:{width:316,height:316},children:[(0,b.jsxs)("svg",{width:332,height:332,className:"absolute inset-0 pointer-events-none",children:[(0,b.jsx)("line",{x1:13,y1:303,x2:303,y2:13,stroke:"black",strokeWidth:"1"}),a.length>0&&(0,b.jsx)("polyline",{points:e,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-primary"})]}),(0,b.jsx)(d,{gridSize:30,spacing:10,dotSize:6,dayRecords:a})]}),(0,b.jsx)("div",{className:"flex justify-between mt-1 text-xs font-semibold text-foreground",style:{width:316,paddingLeft:8,paddingRight:8},children:Array.from({length:30},(a,c)=>{let d=c+1;return(0,b.jsx)("div",{className:"flex justify-center",style:{width:10},children:(0,b.jsx)("span",{className:"text-xs",style:{fontSize:"10px"},children:d%5==0?d:""})},d)})})]})})}function f({onSave:a,isSaved:d,habitData:e}){let[f,g]=(0,c.useState)(e.name);return(0,b.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-screen p-4 gap-6",children:(0,b.jsxs)("div",{className:"w-full max-w-sm bg-card border border-foreground/10 rounded-lg p-6 shadow-md",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4 text-center",children:"Create New Habit"}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Habit Name"}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g., Phone Habit",className:"w-full px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsx)("button",{onClick:()=>{f.trim()&&(a(f,""),g(""))},disabled:!f.trim(),className:"w-full px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border border-primary disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:"Create Habit"})]})]})})}function g({dayRecords:a,habitStartDate:c}){let d=new Date,e=d.getMonth(),f=d.getFullYear(),g=new Date(c).getDate(),h=new Date(f,e+1,0).getDate(),i=new Date(f,e,1).getDay(),j=b=>{if(b<g)return"inactive";let c=b-g+1,d=a.find(a=>a.x===c);if(!d)return"pending";let e=a.find(a=>a.x===c-1),f=e?e.y:0;return d.y>f?"completed":"missed"},k=[];for(let a=0;a<i;a++)k.push((0,b.jsx)("div",{className:"w-10 h-10"},`empty-${a}`));for(let a=1;a<=h;a++){let c=j(a),e=a===d.getDate();k.push((0,b.jsxs)("div",{className:`w-10 h-10 flex items-center justify-center text-sm font-medium relative ${e?"ring-1 ring-blue-400":""}`,style:{backgroundColor:"inactive"===c?"#f3f4f6":"#ffffff",color:"inactive"===c?"#9ca3af":"#374151",border:"1px solid #e5e7eb",borderRadius:"2px"},children:[(0,b.jsx)("span",{className:`${"inactive"===c?"opacity-60":""} relative z-10`,children:a}),"completed"===c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-sm",style:{backgroundColor:"rgba(34, 197, 94, 0.15)"}}),(0,b.jsx)("div",{className:"absolute top-1 right-1 w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:"#22c55e"},children:"âœ“"})]}),"missed"===c&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-sm",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"}}),(0,b.jsx)("div",{className:"absolute top-1 right-1 w-6 h-6 rounded-full flex items-center justify-center text-white text-sm font-bold",style:{backgroundColor:"#ef4444"},children:"âœ—"})]})]},a))}return(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 max-w-sm mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-4",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-1",children:[h-g+1," DAYS CHALLENGE"]}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-3",children:["January","February","March","April","May","June","July","August","September","October","November","December"][e].toUpperCase()})]}),(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-1 mb-3",children:[["S","M","T","W","T","F","S"].map((a,c)=>(0,b.jsx)("div",{className:"w-10 h-6 flex items-center justify-center text-xs font-medium text-gray-500",children:a},a)),k]}),(0,b.jsxs)("div",{className:"flex justify-center gap-4 text-xs text-gray-600",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:"#f3f4f6"}}),(0,b.jsx)("span",{children:"Inactive"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-green-500 text-white text-xs flex items-center justify-center",children:"âœ“"}),(0,b.jsx)("span",{children:"Done"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"w-3 h-3 rounded bg-red-500 text-white text-xs flex items-center justify-center",children:"âœ—"}),(0,b.jsx)("span",{children:"Missed"})]})]})]})}function h({habit:a,onAddHabit:d,onUpdateRecords:h,onDeleteHabit:i,isNewHabitMode:j,onUpdateHabit:k,onViewChange:l}){let[m,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(a?.preferredView||"chart"),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=a=>{s&&t(!1)};return s&&document.addEventListener("click",a),()=>{document.removeEventListener("click",a)}},[s]),(0,c.useEffect)(()=>{if(a){let b=new Date().toISOString().slice(0,7);a.monthYear!==b?n([]):n(a.dayRecords),p(!0)}else n([]),p(!1)},[a]),(0,c.useEffect)(()=>{o&&a&&h(m)},[m,o]);let A=()=>{if(!a)return!1;let b=new Date,c=new Date(a.createdAt),d=Math.floor((b.getTime()-c.getTime())/864e5)+1;return m.some(a=>a.x===d)};return j?(0,b.jsx)(f,{onSave:(a,b)=>{d(a,b),p(!0)},isSaved:!1,habitData:{name:"",person:""}}):(0,b.jsx)("div",{className:"flex flex-col h-full px-4 py-2",children:a&&o&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"relative flex items-center justify-end py-2 flex-shrink-0",children:[(0,b.jsxs)("button",{onClick:()=>t(!s),className:"flex items-center gap-1 text-base font-semibold text-right hover:text-primary transition-colors",children:["chart"===u?"Chart view":"Calendar view",(0,b.jsx)("span",{className:`transform transition-transform ${s?"rotate-180":""}`,children:"â–¼"})]}),s&&(0,b.jsxs)("div",{className:"absolute top-8 right-0 bg-background border border-foreground/20 rounded-md shadow-lg z-10 min-w-32",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:()=>{v("chart"),t(!1),l?.("chart"),a&&k&&k({...a,preferredView:"chart"})},className:`w-full px-3 py-2 text-left hover:bg-muted transition-colors text-sm ${"chart"===u?"bg-muted font-semibold":""}`,children:"Chart view"}),(0,b.jsx)("button",{onClick:()=>{v("calendar"),x(!0),t(!1),l?.("calendar"),a&&k&&k({...a,preferredView:"calendar"})},className:`w-full px-3 py-2 text-left hover:bg-muted transition-colors text-sm ${"calendar"===u?"bg-muted font-semibold":""}`,children:"Calendar view"})]})]}),(0,b.jsx)("div",{className:"w-full py-4",children:"chart"===u?(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(e,{dayRecords:m})}):(0,b.jsx)(g,{dayRecords:m,habitStartDate:a.createdAt})}),y&&(0,b.jsx)("div",{className:"bg-orange-100 border border-orange-300 text-orange-800 px-4 py-2 rounded-md text-center text-sm font-medium mb-2",children:"You have already logged your habit for today!"}),(0,b.jsxs)("div",{className:"flex gap-2 flex-shrink-0 px-2",children:[(0,b.jsx)("button",{onClick:()=>{if(A()){z(!0),setTimeout(()=>z(!1),3e3);return}n(a=>{let b=a[a.length-1];if(!b)return[{x:1,y:1}];let c=b.x+1,d=b.y+1;return c<=30&&d<=30?[...a,{x:c,y:d}]:a})},className:"flex-1 px-3 py-2.5 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-primary shadow-md text-center text-sm",children:"Let's Go"}),(0,b.jsx)("button",{onClick:()=>{if(A()){z(!0),setTimeout(()=>z(!1),3e3);return}n(a=>{let b=a[a.length-1];if(!b)return[{x:1,y:0}];let c=b.x+1,d=Math.max(0,b.y-1);return c<=30?[...a,{x:c,y:d}]:a})},className:"flex-1 px-3 py-2.5 bg-destructive text-white font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-destructive shadow-md text-center text-sm",children:"Habit Missed"})]}),(0,b.jsx)("div",{className:"w-full text-center text-sm font-semibold py-3 flex-shrink-0",children:(0,b.jsx)("button",{onClick:()=>{r(!0)},className:"underline text-foreground hover:text-muted-foreground transition-colors",children:"Want to give up"})}),q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-background border border-border rounded-lg p-6 max-w-sm mx-4 shadow-lg",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4 text-center",children:"Do you really don't want to continue?"}),(0,b.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,b.jsx)("button",{onClick:()=>{i(),r(!1)},className:"flex-1 px-4 py-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600 transition-colors",children:"Yes"}),(0,b.jsx)("button",{onClick:()=>{r(!1)},className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-md hover:bg-gray-300 transition-colors",children:"No"})]})]})})]})})}function i({onSubmit:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!1),p=d.trim()&&""!==f&&h.trim();return(0,c.useEffect)(()=>{let a=localStorage.getItem("savedUsers");if(a)try{let b=JSON.parse(a);m(b),b.length>0&&o(!1)}catch{m([])}},[]),(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",style:{backgroundColor:"#f3f4f6"},children:(0,b.jsxs)("div",{className:"w-full max-w-sm rounded-xl shadow-lg p-8 text-center",style:{backgroundColor:"#ffffff"},children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("div",{className:"w-16 h-16 mx-auto rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%)"},children:(0,b.jsx)("svg",{className:"w-10 h-10 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})})}),n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-2",style:{color:"#1f2937"},children:"Welcome Back!"}),(0,b.jsx)("p",{className:"mb-6",style:{color:"#6b7280"},children:"Select your account to continue"}),(0,b.jsx)("div",{className:"space-y-3",children:l.map((c,d)=>(0,b.jsx)("button",{onClick:()=>{a(c)},className:"w-full p-4 rounded-lg text-left transition-colors border",style:{backgroundColor:"#f9fafb",borderColor:"#e5e7eb"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#f3f4f6",a.currentTarget.style.borderColor="#22d3ee"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#f9fafb",a.currentTarget.style.borderColor="#e5e7eb"},children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{background:"linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%)"},children:c.username.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-medium",style:{color:"#1f2937"},children:c.username}),(0,b.jsx)("div",{className:"text-sm",style:{color:"#6b7280"},children:c.email})]})]})},d))}),(0,b.jsx)("button",{onClick:()=>o(!1),className:"mt-4 text-sm font-medium",style:{color:"#6b7280"},onMouseEnter:a=>a.target.style.color="#22d3ee",onMouseLeave:a=>a.target.style.color="#6b7280",children:"â† Back to Sign Up"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-2",style:{color:"#1f2937"},children:"Join Our Community"}),(0,b.jsx)("p",{className:"mb-8",style:{color:"#6b7280"},children:"Become part of something great"}),(0,b.jsxs)("form",{onSubmit:b=>{(b.preventDefault(),d.trim()&&""!==f&&h.trim())?h.trim().endsWith("@gmail.com")?(k(""),(async()=>{try{let b=await fetch("/api/register-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,age:f,email:h})});if(!b.ok){let a=await b.json().catch(()=>({}));k(a.error||"Failed to register");return}let c={username:d,age:f,email:h},e=[...l.filter(a=>a.email!==h),c];localStorage.setItem("savedUsers",JSON.stringify(e)),a(c)}catch(a){console.error(a),k("Network error")}})()):k("Please enter a valid Gmail address ending with @gmail.com"):k("Please fill in all fields.")},className:"space-y-4",children:[(0,b.jsx)("input",{type:"text",placeholder:"What's your name?",value:d,onChange:a=>e(a.target.value),className:"w-full px-4 py-3 border-0 rounded-lg",style:{backgroundColor:"#f9fafb",color:"#374151",outline:"none"},onFocus:a=>a.target.style.outline="2px solid #22d3ee",onBlur:a=>a.target.style.outline="none",required:!0}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:f,onChange:a=>g(Number(a.target.value)),className:"w-full px-4 py-3 border-0 rounded-lg appearance-none",style:{backgroundColor:"#f9fafb",color:""===f?"#9ca3af":"#374151",outline:"none"},onFocus:a=>a.target.style.outline="2px solid #22d3ee",onBlur:a=>a.target.style.outline="none",required:!0,children:[(0,b.jsx)("option",{value:"",style:{color:"#9ca3af"},children:"How old are you?"}),Array.from({length:66},(a,b)=>15+b).map(a=>(0,b.jsx)("option",{value:a,style:{color:"#374151"},children:a},a))]}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center",style:{color:"#9ca3af"},children:"â–¼"})]}),(0,b.jsx)("input",{type:"email",placeholder:"Your email address",value:h,onChange:a=>i(a.target.value),className:"w-full px-4 py-3 border-0 rounded-lg",style:{backgroundColor:"#f9fafb",color:"#374151",outline:"none"},onFocus:a=>a.target.style.outline="2px solid #22d3ee",onBlur:a=>a.target.style.outline="none",required:!0}),j&&(0,b.jsx)("div",{className:"text-sm text-center",style:{color:"#ef4444"},children:j}),(0,b.jsx)("button",{type:"submit",className:"w-full px-4 py-3 font-semibold rounded-lg transition-all",style:{background:p?"linear-gradient(135deg, #22d3ee 0%, #3b82f6 100%)":"#d1d5db",color:p?"#ffffff":"#6b7280",cursor:p?"pointer":"not-allowed",boxShadow:p?"0 4px 6px -1px rgba(0, 0, 0, 0.1)":"none"},disabled:!p,children:"Let's Go!"})]}),l.length>0&&(0,b.jsx)("div",{className:"mt-6 pt-4",style:{borderTop:"1px solid #e5e7eb"},children:(0,b.jsxs)("p",{className:"text-sm mb-2",style:{color:"#6b7280"},children:["Been here before?"," ",(0,b.jsx)("button",{onClick:()=>o(!0),className:"font-medium hover:underline",style:{color:"#22d3ee"},children:"Log In"})]})})]})]})})}function j({onSelect:a,onBack:d,userName:e,userAge:f=25}){let[g,h]=(0,c.useState)("make"),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(""),m=((a,b)=>{if(a>=15&&a<=20)return"make"===b?[{key:"study",label:"Study 25 mins focused",emoji:"ðŸ“š"},{key:"walk",label:"Walk briskly 15 mins",emoji:"ðŸš¶"},{key:"meditate",label:"Meditate 5 mins daily",emoji:"ðŸ§˜"},{key:"read",label:"Read 10 pages daily",emoji:"ðŸ“–"}]:[{key:"noPhone",label:"No phone after 9 PM",emoji:"ðŸ“µ"},{key:"noSoda",label:"No soda every day",emoji:"ðŸ¥¤"},{key:"sleep",label:"Sleep 7 hrs min",emoji:"ðŸ˜´"},{key:"noJunk",label:"No junk food daily",emoji:"ðŸŸ"}];if(a>=21&&a<=25)return"make"===b?[{key:"save",label:"Save â‚¹100 daily auto",emoji:"ðŸ’°"},{key:"cook",label:"Cook breakfast daily",emoji:"ðŸ³"},{key:"callFriend",label:"Call friend nightly",emoji:"ðŸ“ž"},{key:"stretch",label:"Stretch after waking",emoji:"ðŸ¤¸"}]:[{key:"limitCoffee",label:"Limit coffee to 1 cup",emoji:"â˜•"},{key:"noScreens",label:"No screens after 10 PM",emoji:"ðŸ“º"},{key:"walkShort",label:"Walk short distances",emoji:"ðŸš¶"},{key:"noLateNights",label:"No late nights out",emoji:"ðŸŒ™"}];if(a>=26&&a<=30)return"make"===b?[{key:"readNews",label:"Read news with tea",emoji:"ðŸ“°"},{key:"water",label:"Drink 2L water daily",emoji:"ðŸ’§"},{key:"hobby",label:"Hobby 20 mins daily",emoji:"ðŸŽ¨"},{key:"planMeals",label:"Plan meals weekly",emoji:"ðŸ“‹"}]:[{key:"noEatingOut",label:"No daily eating out",emoji:"ðŸ½ï¸"},{key:"workLimit",label:"Limit work to 8 hrs",emoji:"â°"},{key:"noSnacks",label:"No snacks after 8 PM",emoji:"ðŸª"},{key:"trackExpenses",label:"Track expenses daily",emoji:"ðŸ’³"}];if(a>=31&&a<=35)return"make"===b?[{key:"familyChat",label:"Family chat 15 mins",emoji:"ðŸ‘¨â€ðŸ‘©â€ðŸ‘§â€ðŸ‘¦"},{key:"strength",label:"Strength train 20 mins",emoji:"ðŸ’ª"},{key:"breathing",label:"Deep breaths morning",emoji:"ðŸ«‘"},{key:"journal",label:"Journal before bed",emoji:"ðŸ“"}]:[{key:"singleTask",label:"Single-task only",emoji:"ðŸŽ¯"},{key:"noSugary",label:"No sugary drinks",emoji:"ðŸ¥¤"},{key:"bedTime",label:"Bed by 11 PM",emoji:"ðŸ˜´"},{key:"noWeekendScreens",label:"No weekend screens",emoji:"ðŸ“º"}];if(a>=36&&a<=40)return"make"===b?[{key:"freshLunch",label:"Fresh lunch daily",emoji:"ðŸ¥—"},{key:"walkMorning",label:"Walk before 8 AM",emoji:"ðŸš¶"},{key:"waterFirst",label:"Drink water AM first",emoji:"ðŸ’§"},{key:"stretchDaily",label:"Stretch 10 mins daily",emoji:"ðŸ¤¸"}]:[{key:"noFoodAfter8",label:"No food after 8 PM",emoji:"ðŸ½ï¸"},{key:"standHourly",label:"Stand every 1 hour",emoji:"ðŸ§"},{key:"moveHourly",label:"Move every hour",emoji:"ðŸš¶"},{key:"cutAlcohol",label:"Cut alcohol intake",emoji:"ðŸ·"}];else return"make"===b?[{key:"yoga",label:"Yoga 15 mins daily",emoji:"ðŸ§˜"},{key:"stretchBed",label:"Stretch before bed",emoji:"ðŸ¤¸"},{key:"fruitBreakfast",label:"Fruit in breakfast",emoji:"ðŸŽ"},{key:"puzzle",label:"Puzzle 10 mins daily",emoji:"ðŸ§©"}]:[{key:"noPackaged",label:"No packaged foods",emoji:"ðŸ“¦"},{key:"stand30Min",label:"Stand every 30 mins",emoji:"ðŸ§"},{key:"limitSugar",label:"Limit sugar daily",emoji:"ðŸ­"},{key:"healthCheck",label:"Daily health check",emoji:"ðŸ©º"}]})(f,g),n=async()=>{if(k.trim()){try{await fetch("/api/track-custom-habit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({habitName:k.trim(),habitType:g,userAge:f,userName:e})})}catch(a){console.error("Failed to track custom habit:",a)}a("make"===g?`custom_make:${k.trim()}`:`custom_break:${k.trim()}`)}else i&&a(i)},o=i||k.trim();return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen p-4",style:{backgroundColor:"#f3f4f6"},children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-xl shadow-lg p-4 mx-2",style:{backgroundColor:"#ffffff"},children:[d&&(0,b.jsxs)("div",{className:"flex items-center mb-6",children:[(0,b.jsx)("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-4",style:{color:"#6b7280"},children:(0,b.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),(0,b.jsxs)("h1",{className:"text-lg font-bold",style:{color:"#1f2937"},children:["Welcome, ",e||"User","!"]})]}),(0,b.jsxs)("div",{className:"flex mb-6",children:[(0,b.jsx)("button",{className:`flex-1 px-4 py-3 font-semibold border-2 rounded-l-lg transition-colors ${"make"===g?"border-gray-800 bg-white text-gray-800":"border-gray-300 bg-gray-100 text-gray-600"}`,onClick:()=>{h("make"),j(""),l("")},children:"Make Habit"}),(0,b.jsx)("button",{className:`flex-1 px-4 py-3 font-semibold border-2 border-l-0 rounded-r-lg transition-colors ${"break"===g?"border-gray-800 bg-white text-gray-800":"border-gray-300 bg-gray-100 text-gray-600"}`,onClick:()=>{h("break"),j(""),l("")},children:"Break Habit"})]}),(0,b.jsx)("div",{className:"space-y-3 mb-4",children:m.map(a=>(0,b.jsxs)("button",{className:`w-full p-4 rounded-lg text-left transition-all border-2 flex items-center gap-3 ${i===a.key?"border-gray-400 bg-gray-50":"border-gray-200 bg-gray-50 hover:border-gray-300"}`,onClick:()=>{j(i===a.key?"":a.key),k&&l("")},children:[(0,b.jsx)("span",{className:"text-2xl",children:a.emoji}),(0,b.jsx)("span",{className:"font-medium",style:{color:"#374151"},children:a.label})]},a.key))}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"flex gap-2 items-stretch",children:[(0,b.jsx)("input",{type:"text",placeholder:"Create your own habit...",value:k,maxLength:25,onChange:a=>{l(a.target.value),i&&j("")},className:"flex-1 px-2 py-3 text-base border-2 border-gray-300 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all",style:{color:"#374151"}}),(0,b.jsx)("button",{onClick:()=>k&&n(),disabled:!k.trim(),className:`px-3 py-3 rounded-lg font-semibold text-base transition-all w-14 flex items-center justify-center border-2 flex-shrink-0 ${k.trim()?"bg-gray-800 text-white hover:bg-gray-700 shadow-lg border-gray-800":"bg-gray-300 text-gray-500 cursor-not-allowed border-gray-300"}`,children:(0,b.jsx)("span",{className:"text-lg font-bold",children:"+"})})]}),k&&(0,b.jsx)("div",{className:"text-right mt-2",children:(0,b.jsxs)("span",{className:"text-sm",style:{color:k.length>=25?"#ef4444":"#6b7280"},children:[k.length,"/",25]})})]}),(0,b.jsx)("button",{onClick:n,className:"w-full px-4 py-3 font-semibold rounded-lg transition-all",style:{backgroundColor:o?"#1f2937":"#d1d5db",color:o?"#ffffff":"#6b7280",cursor:o?"pointer":"not-allowed"},disabled:!o,children:"Start Building"})]})})}function k({habitType:a,onHabitCreate:d,onBack:e}){let[f,g]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"flex flex-col h-screen bg-background",children:[(0,b.jsx)("div",{className:"px-4 py-3 bg-card border-b border-border",children:(0,b.jsx)("button",{onClick:e,className:"px-3 py-2 bg-muted text-muted-foreground hover:bg-muted/80 transition-colors font-medium text-sm rounded-md",children:"â† Back"})}),(0,b.jsxs)("div",{className:"flex-1 p-4 flex flex-col justify-center max-w-md mx-auto w-full",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-foreground mb-4 text-center",children:"make"===a?"What are you really good at? but not consistent with it...":"What are the bad habits which you are trying to break?"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("textarea",{className:"w-full border-2 border-input rounded-lg p-3 text-base bg-background text-foreground min-h-[100px] resize-none focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Describe in an one line",value:f,onChange:a=>g(a.target.value),maxLength:200}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground text-right mt-1",children:[f.length,"/200"]})]}),(0,b.jsx)("button",{className:`w-full py-4 rounded-lg text-base font-bold transition-colors ${f.trim()?"bg-primary text-primary-foreground hover:bg-primary/90":"bg-muted text-muted-foreground cursor-not-allowed"}`,onClick:()=>{f.trim()?d(f.trim()):alert("Please describe your habit")},disabled:!f.trim(),children:"Let's Build â†’"})]})]})}function l(){let a,d,[e,f]=(0,c.useState)([]),[g,l]=(0,c.useState)(0),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(0),[q,r]=(0,c.useState)(0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)("chart"),I=a=>{let b=[{key:"study",label:"Study focused for 25 mins"},{key:"walk",label:"Walk briskly 15 mins daily"},{key:"meditate",label:"Meditate calmly for 10 mins"},{key:"read",label:"Read 10 pages daily"},{key:"noPhone",label:"No phone after 9 PM"},{key:"noSoda",label:"Skip soda daily"},{key:"sleep",label:"Avoid sleeping less than 7 hours"},{key:"noJunk",label:"Avoid junk food daily"},{key:"save",label:"Saved â‚¹100 everyday"},{key:"cook",label:"Cook breakfast before work"},{key:"callFriend",label:"Call one friend after dinner"},{key:"stretch",label:"Stretch after waking up"},{key:"limitCoffee",label:"Limit coffee to one cup"},{key:"noScreens",label:"No screens after 10 PM"},{key:"walkInstead",label:"Walk instead of driving short distances"},{key:"noLateNights",label:"Cut late nights"},{key:"readNews",label:"Read news during morning tea"},{key:"water",label:"Drink 2L of water daily"},{key:"hobby",label:"Do hobby 20 mins daily"},{key:"planMeals",label:"Plan meals for the week"},{key:"noEatingOut",label:"No eating out daily"},{key:"workLimit",label:"Work limit 8 hours"},{key:"noSnacks",label:"No snacks after 8 PM"},{key:"trackExpenses",label:"Track daily expenses"},{key:"familyChat",label:"Family chat 15 mins"},{key:"strength",label:"Strength training 20 mins"},{key:"breathing",label:"Deep breathing after waking up"},{key:"journal",label:"Journal before sleep"},{key:"oneTask",label:"One task at a time (no multitasking)"},{key:"noSugary",label:"Skip sugary drinks"},{key:"bedtime",label:"Bedtime by 11 PM"},{key:"noWeekendBinge",label:"No weekend screen binge"},{key:"freshLunch",label:"Lunch cooked fresh daily"},{key:"morningWalk",label:"Morning walk before 8 AM"},{key:"waterMorning",label:"Drink 2 glasses of water in the morning"},{key:"stretchDaily",label:"Stretch 10 mins daily"},{key:"noFoodAfter8",label:"No food after 8 PM"},{key:"stand2Min",label:"Stand for 2 minutes every hour"},{key:"moveHourly",label:"Move body every hour"},{key:"reduceAlcohol",label:"Reduce alcohol intake"},{key:"yoga",label:"Yoga 15 mins"},{key:"stretchBed",label:"Stretch before bed"},{key:"fruitBreakfast",label:"Eat fruit with breakfast"},{key:"puzzle",label:"Solve puzzle 10 mins"},{key:"noProcessed",label:"No processed packaged foods"},{key:"stand30Min",label:"Stand every 30 mins"},{key:"limitSugar",label:"Limit sugar intake"},{key:"checkHealth",label:"Check health signs daily"}].find(b=>b.key===a);return b?b.label:a};(0,c.useEffect)(()=>{let a=localStorage.getItem("currentUser");if(a)try{let b=JSON.parse(a);v(b);let c=`habits_${b.email}`,d=localStorage.getItem(c);if(d)try{let a=JSON.parse(d);f(a),a.length>0&&x("existing")}catch{f([])}}catch{localStorage.removeItem("currentUser")}n(!0)},[]),(0,c.useEffect)(()=>{if(m&&u){let a=`habits_${u.email}`;localStorage.setItem(a,JSON.stringify(e))}},[e,m,u]);let J=(a,b)=>{let c=new Date().toISOString().slice(0,7);f([...e,{id:Date.now().toString(),name:a,person:b,dayRecords:[],createdAt:new Date().toISOString(),monthYear:c}]),l(e.length)};return m?u?w||y||0!==e.length?y?(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)("div",{className:"w-full max-w-md",children:(0,b.jsx)(k,{habitType:y,onHabitCreate:a=>{J(a,"__hide__"),x(a),z(null)},onBack:()=>z(null)})})}):(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsxs)("div",{className:"w-full h-screen max-w-md bg-background overflow-hidden flex flex-col",children:[A?(0,b.jsx)(j,{userName:u?.username,userAge:u?.age||25,onBack:()=>B(!1),onSelect:a=>{if("custom_make"===a)z("make"),B(!1),l(e.length);else if("custom_break"===a)z("break"),B(!1),l(e.length);else if(a.startsWith("custom_make:")){let b=a.replace("custom_make:",""),c=new Date().toISOString().slice(0,7);f([...e,{id:Date.now().toString(),name:b,person:u?.username||"User",dayRecords:[],createdAt:new Date().toISOString(),monthYear:c}]),l(e.length),B(!1)}else if(a.startsWith("custom_break:")){let b=a.replace("custom_break:",""),c=new Date().toISOString().slice(0,7);f([...e,{id:Date.now().toString(),name:b,person:u?.username||"User",dayRecords:[],createdAt:new Date().toISOString(),monthYear:c}]),l(e.length),B(!1)}else{let b=I(a);x(a),B(!1);let c=new Date().toISOString().slice(0,7);f([...e,{id:Date.now().toString(),name:b,person:u?.username||"User",dayRecords:[],createdAt:new Date().toISOString(),monthYear:c}]),l(e.length)}}}):0===e.length||g===e.length?(0,b.jsx)(h,{habit:null,onAddHabit:J,onUpdateRecords:()=>{},onDeleteHabit:()=>{},onUpdateHabit:()=>{},onViewChange:H,isNewHabitMode:!0}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-card border-b border-foreground/10 p-3 flex items-center justify-between gap-2",onTouchStart:a=>{p(a.targetTouches[0].clientX),t(!0)},onTouchEnd:a=>{s&&(r(a.changedTouches[0].clientX),(()=>{if(!s)return;let a=o-q,b=a>50,c=a<-50;b&&g<e.length-1?l(g+1):b&&g===e.length-1?l(0):c&&g>0?l(g-1):c&&0===g&&l(e.length-1),t(!1)})())},children:[(0,b.jsx)("button",{onClick:()=>D(!0),className:"p-2 hover:bg-muted rounded-full transition-colors border border-foreground/20",title:"Profile",children:(0,b.jsx)("svg",{className:"w-6 h-6 text-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsxs)("div",{className:"flex-1 mr-1",children:[(0,b.jsx)("h1",{className:"text-base font-bold text-foreground truncate",style:{maxWidth:"calc(100vw - 120px)"},children:e[g]?.name}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Created: ",new Date(e[g]?.createdAt||"").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),(0,b.jsx)("button",{onClick:()=>B(!0),className:"bg-primary text-primary-foreground font-semibold rounded text-xs hover:opacity-90 transition-opacity px-3 py-2",title:"Add new habit",style:{minWidth:"60px",height:"32px"},children:"+ Add"})]}),(0,b.jsx)("div",{className:"bg-muted/50 border-b border-foreground/10 p-3 mx-4 mt-2 rounded-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Successful days"}),(0,b.jsx)("span",{className:"text-lg font-bold text-green-600",children:(()=>{let a=e[g]?.dayRecords||[],b=e[g],c=a.length>0?a[a.length-1].y:0;if("chart"===G)return`${c}/30`;{let a=new Date,d=new Date(b?.createdAt||""),e=a.getMonth(),f=a.getFullYear(),g=d.getDate(),h=new Date(f,e+1,0).getDate();return`${c}/${h-g+1}`}})()})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Missed days"}),(0,b.jsx)("span",{className:"text-lg font-bold text-red-500",children:(a=e[g]?.dayRecords||[],d=0,a.forEach((b,c)=>{if(0===c)0===b.y&&d++;else{let e=a[c-1];b.y<e.y&&d++}}),d)})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsx)("span",{className:"font-semibold text-foreground",children:"Conversion"}),(0,b.jsx)("span",{className:"text-lg font-bold text-primary",children:(()=>{let a=e[g];if(!a)return"0%";let b=a.dayRecords||[],c=b.length>0?b[b.length-1].y:0;if(0===c)return"0%";if("chart"===G)return c>0?Math.ceil(c/29*1e3)/10+"%":"0%";{let b=new Date,d=new Date(a?.createdAt||""),e=b.getMonth(),f=b.getFullYear(),g=d.getDate(),h=new Date(f,e+1,0).getDate()-g+1;return h<=0?"0%":Math.ceil(c/h*1e3)/10+"%"}})()})]})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsx)(h,{habit:e[g],onAddHabit:J,onUpdateRecords:a=>{var b;return b=e[g].id,void f(e.map(c=>c.id===b?{...c,dayRecords:a}:c))},onDeleteHabit:()=>{var a;let b;return a=e[g].id,void(f(b=e.filter(b=>b.id!==a)),g>=b.length&&g>0&&l(g-1))},onUpdateHabit:a=>{var b;return b=e[g].id,void f(e.map(c=>c.id===b?{...c,...a}:c))},onViewChange:H,isNewHabitMode:!1})})]}),C&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>D(!1)}),(0,b.jsx)("div",{className:"absolute left-0 top-0 h-full w-3/4 max-w-sm bg-background border-r border-foreground/20 shadow-xl",children:(0,b.jsxs)("div",{className:"p-6 space-y-6 h-full overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground",children:"Profile"}),(0,b.jsx)("button",{onClick:()=>D(!1),className:"p-1 hover:bg-muted rounded",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-primary-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"font-semibold text-foreground",children:u?.username||"User"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:u?.email||"user@example.com"})]})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Age: ",u?.age||"Not specified"]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Date Joined: ",new Date().toLocaleDateString()]})]}),(0,b.jsx)("div",{className:"space-y-2 pt-4 border-t border-foreground/10",children:(0,b.jsxs)("button",{onClick:()=>F(!0),className:"w-full text-left p-3 hover:bg-muted rounded-lg transition-colors",children:[(0,b.jsx)("div",{className:"font-medium",children:"Log out"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Sign out of your account"})]})})]})})]}),E&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-background border border-border rounded-lg p-6 max-w-sm mx-4 shadow-lg",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4 text-center",children:"Do you want to log out?"}),(0,b.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,b.jsx)("button",{onClick:()=>{localStorage.removeItem("currentUser"),v(null),f([]),x(null),D(!1),F(!1)},className:"flex-1 px-4 py-2 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-600 transition-colors",children:"Yes"}),(0,b.jsx)("button",{onClick:()=>F(!1),className:"flex-1 px-4 py-2 bg-gray-200 text-gray-800 font-semibold rounded-md hover:bg-gray-300 transition-colors",children:"No"})]})]})})]})}):(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)(j,{userAge:u?.age||25,onSelect:a=>{if("custom_make"===a)z("make");else if("custom_break"===a)z("break");else if(a.startsWith("custom_make:")){let b=a.replace("custom_make:","");J(b,"__hide__"),x(b)}else if(a.startsWith("custom_break:")){let b=a.replace("custom_break:","");J(b,"__hide__"),x(b)}else{let b=I(a);x(a),J(b,"__hide__")}}})}):(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)(i,{onSubmit:a=>{v(a),localStorage.setItem("currentUser",JSON.stringify(a));let b=`habits_${a.email}`,c=localStorage.getItem(b);if(c)try{let a=JSON.parse(c);f(a),a.length>0&&x("existing")}catch{f([])}}})}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-foreground",children:"Loading your habits..."})]})})}a.s(["default",()=>l],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map