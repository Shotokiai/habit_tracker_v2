module.exports=[60350,a=>{"use strict";var b=a.i(99689),c=a.i(17196);function d({gridSize:a,spacing:c,dotSize:d,dayRecords:e}){return(0,b.jsx)("div",{className:"relative",style:{width:a*c,height:a*c},children:Array.from({length:a},(a,b)=>b+1).map(f=>Array.from({length:a},(a,b)=>b+1).map(g=>{let h=e.some(a=>a.x===f&&a.y===g&&a.y>0);return(0,b.jsx)("div",{className:`absolute rounded-full transition-all ${h?"bg-primary shadow-lg scale-125":"bg-muted hover:bg-muted-foreground/30"}`,style:{width:d,height:d,left:f*c-c/2,top:(a-g+1)*c-c/2,transform:"translate(-50%, -50%)"}},`${f}-${g}`)}))})}function e({dayRecords:a}){let e=(0,c.useMemo)(()=>{if(0===a.length)return"";let b=[];return a.forEach(a=>{let c=18*a.x+9,d=558-(18*a.y+9);b.push(`${c},${d}`)}),b.join(" L ")},[a,558]);return(0,b.jsx)("div",{className:"flex flex-col items-center gap-2 overflow-x-auto px-2 py-4",children:(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute -left-12 top-0 flex flex-col justify-between text-xs font-semibold text-foreground",style:{height:598},children:Array.from({length:31},(a,b)=>31-b).map(a=>(0,b.jsx)("div",{className:"flex items-center justify-end w-10 h-4",children:(0,b.jsx)("span",{children:a})},a))}),(0,b.jsxs)("div",{className:"relative bg-card border border-foreground/20 rounded-lg p-2 shadow-md ml-2",style:{width:598,height:598},children:[(0,b.jsx)("svg",{width:598,height:598,className:"absolute inset-0 pointer-events-none",children:a.length>0&&(0,b.jsx)("polyline",{points:e,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-primary"})}),(0,b.jsx)(d,{gridSize:31,spacing:18,dotSize:12,dayRecords:a})]}),(0,b.jsx)("div",{className:"flex justify-between mt-2 text-xs font-semibold text-foreground ml-2",style:{width:598},children:Array.from({length:31},(a,b)=>b+1).map(a=>(0,b.jsx)("div",{className:"w-4 text-center text-xs",children:(0,b.jsx)("span",{children:a})},a))})]})})}function f({onSave:a,isSaved:d,habitData:e}){let[f,g]=(0,c.useState)(e.name),[h,i]=(0,c.useState)(e.person),j="__hide__"===e.person,k=()=>{f.trim()&&h.trim()&&(a(f,h),g(""),i(""))};return compact?(0,b.jsx)("div",{className:"w-full flex flex-col items-center justify-start p-2",children:(0,b.jsxs)("div",{className:"w-full bg-card border border-foreground/10 rounded-lg p-3 shadow-sm",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-foreground mb-2 text-center",children:"Create New Habit"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"Habit name",className:"w-full px-3 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"Why I want to build this habit?",className:"w-full px-3 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)("button",{onClick:k,disabled:!f.trim()||!h.trim(),className:"w-full px-3 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border border-primary disabled:opacity-50 disabled:cursor-not-allowed mt-1",children:"Create Habit"})]})]})}):(0,b.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-screen p-4 gap-6",children:(0,b.jsxs)("div",{className:"w-full max-w-sm bg-card border border-foreground/10 rounded-lg p-6 shadow-md",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4 text-center",children:"Create New Habit"}),(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Habit Name"}),(0,b.jsx)("input",{type:"text",value:f,onChange:a=>g(a.target.value),placeholder:"e.g., Phone Habit",className:"w-full px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Why I want to build this habit?"}),(0,b.jsx)("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"e.g., To improve my focus and productivity",className:"w-full px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,b.jsx)("button",{onClick:k,disabled:!f.trim()||!j&&!h.trim(),className:"w-full px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border border-primary disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:"Create Habit"})]})]})})}function g({habit:a,onAddHabit:d,onUpdateRecords:g,onDeleteHabit:h,isNewHabitMode:i}){let[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{if(a){let b=new Date().toISOString().slice(0,7);a.monthYear!==b?k([]):k(a.dayRecords),m(!0)}else k([]),m(!1)},[a]),(0,c.useEffect)(()=>{l&&a&&g(j)},[j,l]),i)?(0,b.jsx)(f,{onSave:(a,b)=>{d(a,b),m(!0)},isSaved:!1,habitData:{name:"",person:""}}):(0,b.jsx)("div",{className:"flex flex-col gap-4 p-4 h-full",children:a&&l&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-card rounded-lg p-4 border border-foreground/10",children:[(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Why I want to build this habit? ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:a.person})]}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Month:"," ",new Date(a.monthYear+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),(0,b.jsx)("div",{className:"text-center text-base font-semibold mb-2",children:"Change view V"}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,b.jsx)(e,{dayRecords:j})}),(0,b.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,b.jsx)("button",{onClick:()=>{k(a=>{let b=a[a.length-1];if(!b)return[{x:1,y:1}];let c=b.x+1,d=b.y+1;return c<=31&&d<=31?[...a,{x:c,y:d}]:a})},className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-primary shadow-md",children:"Let's Go"}),(0,b.jsx)("button",{onClick:()=>{k(a=>{let b=a[a.length-1];if(!b)return[{x:1,y:0}];let c=b.x+1,d=Math.max(0,b.y-1);return c<=31?[...a,{x:c,y:d}]:a})},className:"w-full px-6 py-3 bg-destructive text-white font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-destructive shadow-md",children:"Habit Missed"})]}),(0,b.jsx)("div",{className:"w-full text-center text-base font-semibold mt-4 mb-2",children:"Want to give up"})]})})}function h({onSubmit:a}){let[d,e]=(0,c.useState)(""),[f,g]=(0,c.useState)(""),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),l=d.trim()&&""!==f&&h.trim();return(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsxs)("div",{className:"w-full max-w-xs mx-auto bg-card rounded-lg shadow-md border border-foreground/10 p-0 relative flex flex-col items-center",children:[(0,b.jsx)("div",{className:"absolute inset-0 h-1/3 w-full bg-gradient-to-b from-primary/30 to-transparent rounded-t-lg z-0"}),(0,b.jsxs)("form",{onSubmit:b=>{(b.preventDefault(),d.trim()&&""!==f&&h.trim())?(k(""),(async()=>{try{let b=await fetch("/api/register-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,age:f,email:h})});if(!b.ok){let a=await b.json().catch(()=>({}));k(a.error||"Failed to register");return}a({username:d,age:f,email:h})}catch(a){console.error(a),k("Network error")}})()):k("Please fill in all fields.")},className:"flex flex-col gap-4 p-6 w-full z-10",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-center",children:"Welcome! Tell us about yourself"}),(0,b.jsx)("input",{type:"text",placeholder:"Your name",value:d,onChange:a=>e(a.target.value),className:"px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsxs)("select",{value:f,onChange:a=>g(Number(a.target.value)),className:"px-4 py-2 pr-10 border border-foreground/20 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary w-full appearance-none",required:!0,children:[(0,b.jsx)("option",{value:"",children:"Your age"}),Array.from({length:66},(a,b)=>15+b).map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-muted-foreground",children:"▼"})]}),(0,b.jsx)("input",{type:"email",placeholder:"Your email",value:h,onChange:a=>i(a.target.value),className:"px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),j&&(0,b.jsx)("div",{className:"text-destructive text-sm text-center",children:j}),(0,b.jsx)("button",{type:"submit",className:`w-full px-4 py-2 font-semibold rounded-lg transition-opacity border mt-2 ${l?"bg-primary text-primary-foreground border-primary hover:opacity-90":"bg-muted text-muted-foreground border-muted cursor-not-allowed"}`,disabled:!l,children:"Continue"})]})]})})}let i=[{key:"walk",label:"Walk 2km a day",img:"/images/walk.png"},{key:"water",label:"Drink 3L water daily",img:"/images/water.png"},{key:"read",label:"Read 20 Min a day",img:"/images/read.png"},{key:"workout",label:"30 min Basic Workout",img:"/images/workout.png"},{key:"plan",label:"Plan the next day",img:"/images/plan.png"},{key:"custom",label:"Create your own",img:"/images/custom.png"}],j=[{key:"gaming",label:"Limit Excessive gaming",img:"/images/gaming.png"},{key:"junkfood",label:"Eating junk food",img:"/images/junkfood.png"},{key:"reels",label:"Scrolling reels for long periods",img:"/images/reels.png"},{key:"smoking",label:"Smoking cigarettes",img:"/images/smoking.png"},{key:"selftalk",label:"Negative self talk",img:"/images/selftalk.png"},{key:"custom",label:"Create your own",img:"/images/custom.png"}];function k({onSelect:a}){let[d,e]=(0,c.useState)("make"),[f,g]=(0,c.useState)("");return(0,b.jsxs)("div",{className:"flex flex-col gap-4 p-6 max-w-xs mx-auto bg-card rounded-lg shadow-md border border-foreground/10 mt-10",children:[(0,b.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,b.jsx)("button",{className:`flex-1 px-2 py-1 rounded-t-lg border-b-2 ${"make"===d?"border-primary font-bold":"border-muted"}`,onClick:()=>e("make"),children:"Make Habit"}),(0,b.jsx)("button",{className:`flex-1 px-2 py-1 rounded-t-lg border-b-2 ${"break"===d?"border-primary font-bold":"border-muted"}`,onClick:()=>e("break"),children:"Break Habit"})]}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:("make"===d?i:j).map(a=>(0,b.jsxs)("button",{className:`flex flex-col items-center gap-2 p-2 border rounded-lg ${f===a.key?"border-primary bg-primary/10":"border-muted bg-background"}`,onClick:()=>g(a.key),children:[(0,b.jsx)("img",{src:a.img||"/placeholder-logo.png",alt:"",className:"w-8 h-8",onError:a=>{a.currentTarget.src="/placeholder-logo.png"}}),(0,b.jsx)("span",{className:"text-xs text-center",children:a.label})]},a.key))}),(0,b.jsx)("button",{className:`w-full px-4 py-2 font-semibold rounded-lg transition-opacity border mt-2 ${f?"bg-primary text-primary-foreground border-primary hover:opacity-90":"bg-muted text-muted-foreground border-muted cursor-not-allowed"}`,disabled:!f,onClick:()=>f&&a(f),children:"Let's build →"})]})}function l(){let[a,d]=(0,c.useState)([]),[e,f]=(0,c.useState)(0),[i,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)(0),[n,o]=(0,c.useState)(0),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=localStorage.getItem("habits");if(a)try{d(JSON.parse(a))}catch{d([])}j(!0)},[]),(0,c.useEffect)(()=>{i&&localStorage.setItem("habits",JSON.stringify(a))},[a,i]);let t=(b,c)=>{let e=new Date().toISOString().slice(0,7);d([...a,{id:Date.now().toString(),name:b,person:c,dayRecords:[],createdAt:new Date().toISOString(),monthYear:e}]),f(a.length)};return i?p?r?(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)("div",{className:"w-full h-screen max-w-md bg-background overflow-hidden flex flex-col",onTouchStart:a=>m(a.targetTouches[0].clientX),onTouchEnd:b=>{let c,d,g;o(b.changedTouches[0].clientX),d=(c=l-n)>50,g=c<-50,d&&e<a.length-1?f(e+1):d&&e===a.length-1?f(0):g&&e>0?f(e-1):g&&0===e&&f(a.length-1)},children:0===a.length||e===a.length?(0,b.jsx)(g,{habit:null,onAddHabit:t,onUpdateRecords:()=>{},onDeleteHabit:()=>{},isNewHabitMode:!0}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"bg-card border-b border-foreground/10 p-3 flex items-center justify-between gap-2",children:[(0,b.jsx)("button",{onClick:()=>f(0===e?a.length-1:e-1),className:"px-3 py-1.5 bg-muted text-foreground font-semibold rounded text-sm hover:bg-muted-foreground/50 transition-colors",title:"Previous habit",children:"← Back"}),(0,b.jsx)("h1",{className:"flex-1 text-center text-lg font-bold text-foreground truncate",children:a[e]?.name}),(0,b.jsx)("button",{onClick:()=>f(a.length),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded text-sm hover:opacity-90 transition-opacity",title:"Add new habit",children:"+ Add"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:(0,b.jsx)(g,{habit:a[e],onAddHabit:t,onUpdateRecords:b=>{var c;return c=a[e].id,void d(a.map(a=>a.id===c?{...a,dayRecords:b}:a))},onDeleteHabit:()=>{var b;let c;return b=a[e].id,void(d(c=a.filter(a=>a.id!==b)),e>=c.length&&e>0&&f(e-1))},isNewHabitMode:!1})}),(0,b.jsxs)("div",{className:"bg-card border-t border-foreground/10 px-4 py-2 text-center text-xs text-muted-foreground",children:["Habit ",e+1," of ",a.length," • Swipe to navigate"]})]})})}):(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)(k,{onSelect:a=>{s(a),t(a,"__hide__")}})}):(0,b.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsx)(h,{onSubmit:q})}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-foreground",children:"Loading your habits..."})]})})}a.s(["default",()=>l],60350)}];

//# sourceMappingURL=app_page_tsx_55b2e5ee._.js.map