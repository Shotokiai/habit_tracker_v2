(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var r=e.i(95424),t=e.i(36719);function o({gridSize:e,spacing:t,dotSize:o,dayRecords:a}){return(0,r.jsx)("div",{className:"relative",style:{width:e*t,height:e*t},children:Array.from({length:e},(e,r)=>r+1).map(l=>Array.from({length:e},(e,r)=>r+1).map(n=>{let s=a.some(e=>e.x===l&&e.y===n&&e.y>0);return(0,r.jsx)("div",{className:`absolute rounded-full transition-all ${s?"bg-primary shadow-lg scale-125":"bg-muted hover:bg-muted-foreground/30"}`,style:{width:o,height:o,left:l*t-t/2,top:(e-n+1)*t-t/2,transform:"translate(-50%, -50%)"}},`${l}-${n}`)}))})}function a({dayRecords:e}){let a=(0,t.useMemo)(()=>{if(0===e.length)return"";let r=[];return e.forEach(e=>{let t=18*e.x+9,o=558-(18*e.y+9);r.push(`${t},${o}`)}),r.join(" L ")},[e,558]);return(0,r.jsx)("div",{className:"flex flex-col items-center gap-2 overflow-x-auto px-2 py-4",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute -left-12 top-0 flex flex-col justify-between text-xs font-semibold text-foreground",style:{height:598},children:Array.from({length:31},(e,r)=>31-r).map(e=>(0,r.jsx)("div",{className:"flex items-center justify-end w-10 h-4",children:(0,r.jsx)("span",{children:e})},e))}),(0,r.jsxs)("div",{className:"relative bg-card border border-foreground/20 rounded-lg p-2 shadow-md ml-2",style:{width:598,height:598},children:[(0,r.jsx)("svg",{width:598,height:598,className:"absolute inset-0 pointer-events-none",children:e.length>0&&(0,r.jsx)("polyline",{points:a,fill:"none",stroke:"currentColor",strokeWidth:"2",className:"text-primary"})}),(0,r.jsx)(o,{gridSize:31,spacing:18,dotSize:12,dayRecords:e})]}),(0,r.jsx)("div",{className:"flex justify-between mt-2 text-xs font-semibold text-foreground ml-2",style:{width:598},children:Array.from({length:31},(e,r)=>r+1).map(e=>(0,r.jsx)("div",{className:"w-4 text-center text-xs",children:(0,r.jsx)("span",{children:e})},e))})]})})}function l({onSave:e,isSaved:o,habitData:a}){let[l,n]=(0,t.useState)(a.name),[s,i]=(0,t.useState)(a.person),d="__hide__"===a.person,c=()=>{l.trim()&&s.trim()&&(e(l,s),n(""),i(""))};return compact?(0,r.jsx)("div",{className:"w-full flex flex-col items-center justify-start p-2",children:(0,r.jsxs)("div",{className:"w-full bg-card border border-foreground/10 rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-foreground mb-2 text-center",children:"Create New Habit"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Habit name",className:"w-full px-3 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"Why I want to build this habit?",className:"w-full px-3 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"}),(0,r.jsx)("button",{onClick:c,disabled:!l.trim()||!s.trim(),className:"w-full px-3 py-2 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border border-primary disabled:opacity-50 disabled:cursor-not-allowed mt-1",children:"Create Habit"})]})]})}):(0,r.jsx)("div",{className:"w-full flex flex-col items-center justify-center min-h-screen p-4 gap-6",children:(0,r.jsxs)("div",{className:"w-full max-w-sm bg-card border border-foreground/10 rounded-lg p-6 shadow-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-4 text-center",children:"Create New Habit"}),(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Habit Name"}),(0,r.jsx)("input",{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"e.g., Phone Habit",className:"w-full px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-foreground mb-2",children:"Why I want to build this habit?"}),(0,r.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),placeholder:"e.g., To improve my focus and productivity",className:"w-full px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,r.jsx)("button",{onClick:c,disabled:!l.trim()||!d&&!s.trim(),className:"w-full px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border border-primary disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:"Create Habit"})]})]})})}function n({habit:e,onAddHabit:o,onUpdateRecords:n,onDeleteHabit:s,isNewHabitMode:i}){let[d,c]=(0,t.useState)([]),[u,m]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{if(e){let r=new Date().toISOString().slice(0,7);e.monthYear!==r?c([]):c(e.dayRecords),m(!0)}else c([]),m(!1)},[e]),(0,t.useEffect)(()=>{u&&e&&n(d)},[d,u]),i)?(0,r.jsx)(l,{onSave:(e,r)=>{o(e,r),m(!0)},isSaved:!1,habitData:{name:"",person:""}}):(0,r.jsx)("div",{className:"flex flex-col gap-4 p-4 h-full",children:e&&u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-card rounded-lg p-4 border border-foreground/10",children:[(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Why I want to build this habit? ",(0,r.jsx)("span",{className:"font-semibold text-foreground",children:e.person})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Month:"," ",new Date(e.monthYear+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),(0,r.jsx)("div",{className:"text-center text-base font-semibold mb-2",children:"Change view V"}),(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsx)(a,{dayRecords:d})}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>{c(e=>{let r=e[e.length-1];if(!r)return[{x:1,y:1}];let t=r.x+1,o=r.y+1;return t<=31&&o<=31?[...e,{x:t,y:o}]:e})},className:"flex-1 px-4 py-3 bg-primary text-primary-foreground font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-primary shadow-md",children:"Let's Go"}),(0,r.jsx)("button",{onClick:()=>{c(e=>{let r=e[e.length-1];if(!r)return[{x:1,y:0}];let t=r.x+1,o=Math.max(0,r.y-1);return t<=31?[...e,{x:t,y:o}]:e})},className:"w-full px-6 py-3 bg-destructive text-white font-semibold rounded-lg hover:opacity-90 transition-opacity border-2 border-destructive shadow-md",children:"Habit Missed"})]}),(0,r.jsx)("div",{className:"w-full text-center text-base font-semibold mt-4 mb-2",children:"Want to give up"})]})})}function s({onSubmit:e}){let[o,a]=(0,t.useState)(""),[l,n]=(0,t.useState)(""),[s,i]=(0,t.useState)(""),[d,c]=(0,t.useState)(""),u=o.trim()&&""!==l&&s.trim();return(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,r.jsxs)("div",{className:"w-full max-w-xs mx-auto bg-card rounded-lg shadow-md border border-foreground/10 p-0 relative flex flex-col items-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 h-1/3 w-full bg-gradient-to-b from-primary/30 to-transparent rounded-t-lg z-0"}),(0,r.jsxs)("form",{onSubmit:r=>{(r.preventDefault(),o.trim()&&""!==l&&s.trim())?(c(""),(async()=>{try{let r=await fetch("/api/register-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o,age:l,email:s})});if(!r.ok){let e=await r.json().catch(()=>({}));c(e.error||"Failed to register");return}e({username:o,age:l,email:s})}catch(e){console.error(e),c("Network error")}})()):c("Please fill in all fields.")},className:"flex flex-col gap-4 p-6 w-full z-10",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-center",children:"Welcome! Tell us about yourself"}),(0,r.jsx)("input",{type:"text",placeholder:"Your name",value:o,onChange:e=>a(e.target.value),className:"px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:l,onChange:e=>n(Number(e.target.value)),className:"px-4 py-2 pr-10 border border-foreground/20 rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-primary w-full appearance-none",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Your age"}),Array.from({length:66},(e,r)=>15+r).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center text-muted-foreground",children:"▼"})]}),(0,r.jsx)("input",{type:"email",placeholder:"Your email",value:s,onChange:e=>i(e.target.value),className:"px-4 py-2 border border-foreground/20 rounded-lg bg-background text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary",required:!0}),d&&(0,r.jsx)("div",{className:"text-destructive text-sm text-center",children:d}),(0,r.jsx)("button",{type:"submit",className:`w-full px-4 py-2 font-semibold rounded-lg transition-opacity border mt-2 ${u?"bg-primary text-primary-foreground border-primary hover:opacity-90":"bg-muted text-muted-foreground border-muted cursor-not-allowed"}`,disabled:!u,children:"Continue"})]})]})})}let i=[{key:"walk",label:"Walk 2km a day",img:"/images/walk.png"},{key:"water",label:"Drink 3L water daily",img:"/images/water.png"},{key:"read",label:"Read 20 Min a day",img:"/images/read.png"},{key:"workout",label:"30 min Basic Workout",img:"/images/workout.png"},{key:"plan",label:"Plan the next day",img:"/images/plan.png"},{key:"custom",label:"Create your own",img:"/images/custom.png"}],d=[{key:"gaming",label:"Limit Excessive gaming",img:"/images/gaming.png"},{key:"junkfood",label:"Eating junk food",img:"/images/junkfood.png"},{key:"reels",label:"Scrolling reels for long periods",img:"/images/reels.png"},{key:"smoking",label:"Smoking cigarettes",img:"/images/smoking.png"},{key:"selftalk",label:"Negative self talk",img:"/images/selftalk.png"},{key:"custom",label:"Create your own",img:"/images/custom.png"}];function c({onSelect:e}){let[o,a]=(0,t.useState)("make"),[l,n]=(0,t.useState)("");return(0,r.jsxs)("div",{className:"flex flex-col gap-4 p-6 max-w-xs mx-auto bg-card rounded-lg shadow-md border border-foreground/10 mt-10",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,r.jsx)("button",{className:`flex-1 px-2 py-1 rounded-t-lg border-b-2 ${"make"===o?"border-primary font-bold":"border-muted"}`,onClick:()=>a("make"),children:"Make Habit"}),(0,r.jsx)("button",{className:`flex-1 px-2 py-1 rounded-t-lg border-b-2 ${"break"===o?"border-primary font-bold":"border-muted"}`,onClick:()=>a("break"),children:"Break Habit"})]}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:("make"===o?i:d).map(e=>(0,r.jsxs)("button",{className:`flex flex-col items-center gap-2 p-2 border rounded-lg ${l===e.key?"border-primary bg-primary/10":"border-muted bg-background"}`,onClick:()=>n(e.key),children:[(0,r.jsx)("img",{src:e.img||"/placeholder-logo.png",alt:"",className:"w-8 h-8",onError:e=>{e.currentTarget.src="/placeholder-logo.png"}}),(0,r.jsx)("span",{className:"text-xs text-center",children:e.label})]},e.key))}),(0,r.jsx)("button",{className:`w-full px-4 py-2 font-semibold rounded-lg transition-opacity border mt-2 ${l?"bg-primary text-primary-foreground border-primary hover:opacity-90":"bg-muted text-muted-foreground border-muted cursor-not-allowed"}`,disabled:!l,onClick:()=>l&&e(l),children:"Let's build →"})]})}function u(){let[e,o]=(0,t.useState)([]),[a,l]=(0,t.useState)(0),[i,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(0),[g,x]=(0,t.useState)(0),[b,f]=(0,t.useState)(null),[h,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{let e=localStorage.getItem("habits");if(e)try{o(JSON.parse(e))}catch{o([])}d(!0)},[]),(0,t.useEffect)(()=>{i&&localStorage.setItem("habits",JSON.stringify(e))},[e,i]);let y=(r,t)=>{let a=new Date().toISOString().slice(0,7);o([...e,{id:Date.now().toString(),name:r,person:t,dayRecords:[],createdAt:new Date().toISOString(),monthYear:a}]),l(e.length)};return i?b?h?(0,r.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,r.jsx)("div",{className:"w-full h-screen max-w-md bg-background overflow-hidden flex flex-col",onTouchStart:e=>m(e.targetTouches[0].clientX),onTouchEnd:r=>{let t,o,n;x(r.changedTouches[0].clientX),o=(t=u-g)>50,n=t<-50,o&&a<e.length-1?l(a+1):o&&a===e.length-1?l(0):n&&a>0?l(a-1):n&&0===a&&l(e.length-1)},children:0===e.length||a===e.length?(0,r.jsx)(n,{habit:null,onAddHabit:y,onUpdateRecords:()=>{},onDeleteHabit:()=>{},isNewHabitMode:!0}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-card border-b border-foreground/10 p-3 flex items-center justify-between gap-2",children:[(0,r.jsx)("button",{onClick:()=>l(0===a?e.length-1:a-1),className:"px-3 py-1.5 bg-muted text-foreground font-semibold rounded text-sm hover:bg-muted-foreground/50 transition-colors",title:"Previous habit",children:"← Back"}),(0,r.jsx)("h1",{className:"flex-1 text-center text-lg font-bold text-foreground truncate",children:e[a]?.name}),(0,r.jsx)("button",{onClick:()=>l(e.length),className:"px-3 py-1.5 bg-primary text-primary-foreground font-semibold rounded text-sm hover:opacity-90 transition-opacity",title:"Add new habit",children:"+ Add"})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:(0,r.jsx)(n,{habit:e[a],onAddHabit:y,onUpdateRecords:r=>{var t;return t=e[a].id,void o(e.map(e=>e.id===t?{...e,dayRecords:r}:e))},onDeleteHabit:()=>{var r;let t;return r=e[a].id,void(o(t=e.filter(e=>e.id!==r)),a>=t.length&&a>0&&l(a-1))},isNewHabitMode:!1})}),(0,r.jsxs)("div",{className:"bg-card border-t border-foreground/10 px-4 py-2 text-center text-xs text-muted-foreground",children:["Habit ",a+1," of ",e.length," • Swipe to navigate"]})]})})}):(0,r.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,r.jsx)(c,{onSelect:e=>{p(e),y(e,"__hide__")}})}):(0,r.jsx)("main",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,r.jsx)(s,{onSubmit:f})}):(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-br from-background to-muted",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-foreground",children:"Loading your habits..."})]})})}e.s(["default",()=>u],31713)}]);